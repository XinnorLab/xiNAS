profile: deep
description: "Deep health check - includes SMART, NVMe logs, FS checks, full RDMA"
timeout_seconds: 600
sections:
  services: { enabled: true, checks: [xiraid, nfs_server, rpcbind, nfsdcld, xiraid_exporter, chrony] }
  cpu: { enabled: true, checks: [governor, tuned_profile, numa_balance] }
  kernel: { enabled: true, checks: [thp, ksm, mitigations] }
  vm: { enabled: true, checks: [swappiness, dirty_background_ratio, dirty_ratio, vfs_cache_pressure, zone_reclaim] }
  network: { enabled: true, checks: [link_state, speed, mtu, sysctl_rmem, sysctl_wmem, sysctl_backlog, ring_rx_tx, errors_drops] }
  storage: { enabled: true, checks: [raid_status, raid_devices, mount_status, nr_requests] }
  nfs: { enabled: true, checks: [service_running, threads, versions, rdma_enabled, exports_exist] }
  rdma: { enabled: true, checks: [rdma_devices, port_state, pfc, trust_mode, ecn, roce_tos] }
  nvme_health: { enabled: true, checks: [smart_critical, temperature, wear_level] }
  filesystem: { enabled: true, checks: [disk_usage, inode_usage, mount_opts] }
  kerberos: { enabled: true, checks: [krb5_conf, klist_ticket, idmapd_domain, time_sync] }
expectations:
  cpu_governor: "performance"
  tuned_profile: "throughput-performance"
  vm_swappiness: 1
  vm_dirty_background_ratio: 5
  vm_dirty_ratio: 15
  vm_vfs_cache_pressure: 200
  net_mtu: 9000
  net_rmem_max: 1073741824
  net_wmem_max: 1073741824
  net_backlog: 250000
  net_ring_rx: 8192
  net_ring_tx: 8192
  net_speed_min: 25000
  nvme_nr_requests: 512
  nfs_threads: 64
  thp: "never"
  ksm: 0
  mitigations_off: true
  numa_balance: 0
  nvme_temp_warn: 60
  nvme_temp_fail: 70
  nvme_wear_warn: 50
  nvme_wear_fail: 80
  fs_usage_warn: 80
  fs_usage_fail: 95
  fs_inode_warn: 80
  fs_inode_fail: 95
